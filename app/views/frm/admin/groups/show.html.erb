<h2><%= t('frm.admin.group.members', :group => @frm_group.name) %></h2>
<%= link_to t('back_to_groups', :scope => "frm.admin"), group_frm_admin_frm_groups_path(@group), class: 'btn historyButton' %>
<div class="row">
  <h3><%= t('.add_a_new_member') %></h3>
  <%= form_tag add_group_frm_admin_frm_group_members_url(@group, @frm_group), remote: true do %>
      <p>
        <%= text_field_tag "frm_user_id" %>
      </p>

      <p class="span1">
        <%= submit_tag t('.add_member'), :class => "btn blue", disable_with: t('loading') %>
      </p>
  <% end %>
</div>

<div id="group_members_container">
  <%= render :partial => 'group_members' %>
</div>



<script>
    function format(state) {
        if (!state.id) return state.text; // optgroup
        return state.image_path + state.identifier;
    }

    $("#frm_user_id").select2({
        containerCssClass: "user_auto",
        ajax: {
            url: "<%= group_user_autocomplete_url(@group) %>",
            data: function (term, page) {
                return { "term": term }
            },
            results: function (data, page) {
                return { results: data };
            }
        },
        formatResult: format,
        formatSelection: format
    });
</script>


<%= content_for :left_panel do %>
    <%= render :partial => 'groups/administration_panel' %>
<% end %>
